dist: xenial
language: python
cache: pip
python:
- 3.6
- 3.7
- 3.8
stages:
- check
- docs
- test
matrix:
  include:
  - stage: check
    python: 3.7
    script: scripts/check
  - stage: docs
    python: 3.7
    script: scripts/docs-build
  - stage: test
    os: windows
    language: shell
    python: 3.7
    env: PATH=/c/Python37:/c/Python37/Scripts:$PATH
    before_install:
    - choco install python --version 3.7
    - python -m pip install --upgrade pip
    install: pip install -r requirements.txt
    script: scripts/test
  fast_finish: true
before_script:
- bash test_mypy.sh
before_install:
- openssl aes-256-cbc -K $MY_KEY -iv $MY_IV -in root_key.enc -out root_key -d
script:
- echo "SCRIPT SECTION"
